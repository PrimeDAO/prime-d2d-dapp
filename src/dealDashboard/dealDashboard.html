<template>
  <require from="./dealMenubar/dealMenubar"></require>
  <require from="./dealVotes/dealVotes"></require>
  <require from="./dealInfo/dealInfo"></require>
  <require from="./dealClauses/dealClauses"></require>
  <require from="./dealDiscussion/dealDiscussion"></require>
  <require from="./dealDescription/dealDescription"></require>

  <main class="page animated-page au-animate dealDashboardContainer">
    <deal-menubar deal.bind="deal"></deal-menubar>

    <section class="section top">
      <h1 data-test="dealTitle" class="title heading heading1 gradient">
        ${deal.registrationData.proposal.title}
      </h1>

      <let deal-privacy-text="${deal.registrationData.isPrivate ? 'Private' : 'Public'}"></let>
      <h2 data-test="dealStatus">â€¢ ${deal.status}, Recently updated (${dealPrivacyText})</h2>
    </section>

    <aside class="aside">
      <deal-votes deal.bind="deal"></deal-votes>
      <deal-info deal.bind="deal"></deal-info>
    </aside>

    <deal-description deal.bind="deal"></deal-description>

    <deal-clauses
      authorized.bind="authorized"
      deal.bind="deal"
      discussion-id.two-way="discussionId"
      if.to-view="authorized || !deal.registrationData.isPrivate"
    ></deal-clauses>

    <!-- Discussions / Discussion Comments Thread -->
    <deal-discussion
      authorized.bind="authorized"
      deal.bind="deal"
      discussion-id.two-way="discussionId"
      show.bind="authorized || !deal.registrationData.isPrivate"
    ></deal-discussion>
  </main>
</template>
