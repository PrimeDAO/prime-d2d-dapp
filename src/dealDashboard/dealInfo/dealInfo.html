<template>
  <pcard>
    <h1 class="title heading heading3 gradient">Deal Information</h1>

    <hr>

    <div class="infoSection">
      <img class="daoLogo" src.bind="deal.registrationData.primaryDAO.logoURI">
      <div class="daoDetails">
        ${deal.registrationData.primaryDAO.name}
        <div class="daoSocialLinks">
          <a href.bind="socialMedia.url" repeat.for="socialMedia of deal.registrationData.primaryDAO.social_medias">
            <i class.bind="getSocialMediaDetails(socialMedia.name).icon"></i>
          </a>
        </div>
      </div>
      <span class="bodySmallTextBold">Primary DAO</span>
    </div>

    <hr if.bind="deal.registrationData.partnerDAO">

    <div class="infoSection" if.bind="deal.registrationData.partnerDAO">
      <img class="daoLogo" src.bind="deal.registrationData.partnerDAO.logoURI">
      <div class="daoDetails">
        ${deal.registrationData.partnerDAO.name}
        <div class="daoSocialLinks">
          <a href.bind="socialMedia.url"
             repeat.for="socialMedia of deal.registrationData.partnerDAO.social_medias"
             target="_blank">
            <i class.bind="getSocialMediaDetails(socialMedia.name).icon"></i>
          </a>
        </div>
      </div>
      <span class="bodySmallTextBold">Partner DAO</span>
    </div>

    <hr>

    <div class="infoSection">
      <span class="bodySmallTextBold infoTitle">Type</span>
      Token Swap
    </div>
    <div class="infoSection">
      <span class="bodySmallTextBold infoTitle">Total representatives</span>
      ${deal.representatives.size}
    </div>
    <div class="infoSection" if.bind="deal.isOpenProposal">
      <span class="bodySmallTextBold infoTitle">Deal Lead</span>
      <etherscanlink address.bind="deal.registrationData.proposalLead.address"
                     text="${deal.registrationData.proposalLead.address | smallHexString}">
      </etherscanlink>
    </div>

    <hr>

    <div class="infoSection">
      <div class="bodySmallTextBold infoTitle">Primary DAO Funds</div>
      <div>
        <div class="tokenDetails" repeat.for="tokenDetails of deal.primaryDao.tokens">
          <img class="daoSmallLogo" src.bind="tokenDetails.logoURI">
          <formatted-number
            mantissa="0" thousands-separated
            value.to-view="tokenDetails.amount | ethwei:tokenDetails.decimals"></formatted-number>
          ${tokenDetails.symbol}
        </div>
        <span class="bodySmallTextBold" if.bind="deal.primaryDao.tokens.length === 0">No tokens</span>
      </div>
    </div>

    <hr if.bind="deal.registrationData.partnerDAO">

    <div class="infoSection" if.bind="deal.registrationData.partnerDAO">
      <div class="bodySmallTextBold infoTitle">Partner DAO Funds</div>
      <div>
        <div class="tokenDetails" repeat.for="tokenDetails of deal.partnerDao.tokens">
          <img class="daoSmallLogo" src.bind="tokenDetails.logoURI">
          <formatted-number
            mantissa="0" thousands-separated
            value.to-view="tokenDetails.amount | ethwei:tokenDetails.decimals"></formatted-number>
          ${tokenDetails.symbol}
        </div>
      </div>
    </div>

    <hr>

    <div class="infoSection">
      <span class="bodySmallTextBold infoTitle">Total funds value</span>
      ${deal.totalPrice | currency}
    </div>
    <div class="infoSection" if.bind="deal.executedAt">
      <span class="bodySmallTextBold infoTitle">Time left to initiate</span>
      <span class="textRight">
        ${ timeLeftToExecute | timespan:"largest2"}
      </span>
    </div>

    <hr>

    <div class="infoSection">
      <div class="bodySmallTextBold infoTitle">Private Deal</div>
      <span>
        <ptoggle
          disabled.bind="deal.registrationData.proposalLead.address !== ethereumService.defaultAccountAddress"
          ptooltip.bind="deal.registrationData.proposalLead.address === ethereumService.defaultAccountAddress ? '' : deal.isPrivate ? 'This deal is private' : 'This deal is public'"
          value.to-view="!deal.isPrivate"></ptoggle>
      </span>
    </div>

  </pcard>
</template>
