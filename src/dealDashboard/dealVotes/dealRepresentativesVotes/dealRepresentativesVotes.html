<template>
  <div class="accordion-button ${showMore ? 'active' : ''}" click.delegate="showMore = !showMore">
    <img class="dao-logo" src.bind="dao.logoURI" />
    <div
      class="accordion-title bodySmallText"
      ref="daoName"
      ptooltip.to-view="daoName.scrollWidth > daoName.offsetWidth ? dao.name : ''"
    >
      ${dao.name}
    </div>

    <div class="votes-statuses-circles">
      <template repeat.for="vote of sortedVotes">
        <div
          class="vote-status-circle ${vote !== null ? ('vote-' + (vote ? 'accepted' : 'declined')) : ''}"
        ></div>
        <div
          class="vote-status-circle-delimiter"
          if.bind="shouldShowDelimited(dao.representatives.length, $index)"
        ></div>
      </template>
    </div>
    <i class="fas fa-angle-up arrow"></i>
  </div>

  <div class="panel" css.bind="{'max-height': maxHeight}" ref="panel">
    <p class="representative bodySmallText" repeat.for="representative of dao.representatives">
      <etherscanlink
        address.bind="representative.address"
        text="${representative.address | smallHexString}"
      >
      </etherscanlink>
      ${getVoteSlug(votes, representative.address) || 'hasnâ€™t voted'}
      <span
        class="representative-vote ${getVoteSlug(votes, representative.address) ? 'representative-vote-' + getVoteSlug(votes, representative.address) : ''}"
      >
        <i class="fas fa-check-circle" if.bind="votes[representative.address] === true"></i>
        <i class="fas fa-times-circle" if.bind="votes[representative.address] === false"></i>
        <i class="fas fa-question-circle" if.bind="votes[representative.address] === null"></i>
      </span>
    </p>
  </div>
</template>
