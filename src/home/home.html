<template>
  <require from="../deals/dealSummary/dealSummary"></require>

  <div data-test="home-page" class="page animated-page au-animate home">
    <div class="section top">
      <div class="heading01Gradient">Prime Deals</div>
      <div class="heading04">The platform to negotiate and execute your next DAO to DAO deal. An agnostic, trustless, and flexible environment for DAOplomacy.</div>
      <div class="cards">
        <pcard data-test="all-deals-button" type="gradient" click.delegate="navigate('deals')">
          <header>
            <span class="heading03">View all Deals</span>
            <span class="icon center">&#8599;</span>
          </header>
          <div class="bodyText">Explore all the public deals, check their progress and fork them as templates for your own deal.</div>
        </pcard>
        <pcard data-test="initiate-deal-button" type="gradient" click.delegate="navigate('initiate')">
          <header>
            <span class="heading03">Initiate a Deal</span>
            <span class="icon">&#8599;</span>
          </header>
          <div class="bodyText">Pick an on-chain interaction module, craft your deal, set the terms and negotiate the perfect agreement.</div>
        </pcard>
      </div>

      <!-- Deals Carousel -->
      <div class="section deal-carousel" if.to-view="!dealsLoading && featuredDeals && featuredDeals.length">
        <div class="heading02Gradient carousel-selector">
          <span if.to-view="allDeals.open.length"
            data-test="open-proposals-tab"
            class="selector-tab ${cardIndex==0?'active':''}"
            click.delegate="dealToggle(0, 'open')">
            Open Proposals
          </span>
          <span if.to-view="allDeals.partnered.length"
            class="selector-tab ${cardIndex==1?'active':''}"
            click.delegate="dealToggle(1, 'partnered')">
            Partnered Deals
          </span>
        </div>
        <horizontal-scroller class="featuredDealsScroller" item-count.to-view="featuredDeals.length">
          <deal-summary deal.to-view="deal" repeat.for="deal of featuredDeals"></deal-summary>
        </horizontal-scroller>
        <div class="dealsButton">
          <div class="centered">
            <pbutton
              type="tertiary"
              click.delegate="navigate('deals')"
              rel="noopener noreferrer">
              View All Deals
            </pbutton>
          </div>
        </div>
      </div>

      <div class="section deal-carousel" if.to-view="dealsLoading">
        <div class="loading">
          <div class="text">Loading Deals...</div>
          <span class="fas fa-circle-notch fa-spin icon"></span>
        </div>
      </div>

      <!-- Hero  -->
      <div class="section hero">
        <div class="heroColumn">
          <div class="heading05Secondary">How it works</div>
          <div class="heading02">Web3 partnerships made easy!</div>
          <div class="bodyText">Find a DAO partner or bring your own, propose your deal,Â negotiate and seal your partnership by executing enforceable agreements on-chain.</div>
          <div class="cardContainer">
            <pbutton
              data-test="initiate-deal-button-video-section"
              type="primary"
              click.delegate="navigate('initiate')"
              rel="noopener noreferrer">
              Initiate a deal
            </pbutton>
          </div>
        </div>

        <div class="heroColumn">
          <video class="introVideo" controls poster="//assets.codepen.io/32795/poster.png">
            <source id='mp4' src="//media.w3.org/2010/05/sintel/trailer.mp4" type='video/mp4' />
            <source id='webm' src="//media.w3.org/2010/05/sintel/trailer.webm" type='video/webm' />
            <source id='ogv' src="//media.w3.org/2010/05/sintel/trailer.ogv" type='video/ogg' />
            Video is not supported.
          </video>
        </div>
      </div>

      <!-- Counter Panel -->
      <!-- <counter-panel class="section"></counter-panel> -->

    </div>
  </div>
</template>
