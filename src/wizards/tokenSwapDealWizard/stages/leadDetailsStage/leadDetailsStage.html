<template>
  <require from="../../components/stageWrapper/stageWrapper"></require>
  <stage-wrapper
    header="Proposal Lead"
    wizard-manager.bind="wizardManager">

    <div class="stageSection">
      <div class="stageSectionSidebar">
        <h2 data-test="section-title" class="sidebarHeader heading heading3 title">Proposal Lead</h2>
        <p class="sidebarText">Provide the Ethereum address for the Proposal Lead who will gain admin rights of the deal.</p>
        <p class="sidebarText">Proposal Leads can edit the deal during the negotiation to integrate new points emerging from the conversation. They can initiate the funding phase once a deal is approved and once completely funded, they can initiate token swapping.</p>
        <p class="sidebarText">The Proposal Lead can be changed at any time until the deal is approved.</p>
        <p class="sidebarText">You don't need to be part of DAO to be a Proposal Lead.</p>
      </div>
      <div class="stageSectionContent">
        <pform-input
          class="wizardFormInput"
          label="Proposal Lead Address"
          input-reference.bind="input"
          data-test="proposal-proposal-lead-address-field">
          <pinput-text
            disabled.bind="isMakeAnOfferWizardAndKeepsAdminRights"
            placeholder="0x..."
            value.bind="wizardState.registrationData.proposalLead.address & validate:form"
            view-model.ref="input"></pinput-text>
        </pform-input>
        <pbutton class="walletButton" click.delegate="connectToWallet()" if.bind="!ethAddress" type="formfield">
          Connect to get your wallet address
        </pbutton>
        <pbutton
          class="walletButton"
          click.delegate="wizardState.registrationData.proposalLead.address = ethAddress"
          if.bind="ethAddress && wizardState.registrationData.proposalLead.address !== ethAddress"
          type="formfield">
          Make Me the Proposal Lead
        </pbutton>

        <pform-input class="wizardFormInput wizardFormInputNarrow" data-test="proposal-contact-email-field"
          label="Contact E-mail (optional)">
          <pinput-text disabled.bind="isMakeAnOfferWizardAndKeepsAdminRights"
            value.bind="wizardState.registrationData.proposalLead.email & validate:form"></pinput-text>
        </pform-input>
      </div>
    </div>

    <div class="stageSection" if.bind="isOpenProposalWizard">
      <div class="stageSectionSidebar">
        <h2 class="sidebarHeader heading heading3 title">Keep Admin Rights?</h2>
        <p class="sidebarText">Toggle this option on if you would like to retain the Proposal Lead role to yourself. This will allow you to steer all the offers incoming to your Open Proposal.</p>
        <p class="sidebarText">If instead you toggle this option off, you will transfer your admin rights to the prospect Partner DAO. In this case the Partner DAO will have to register a new Proposal Lead address to which the admin rights will be transfered to.</p>
        <p class="sidebarText">We suggest transferring your admin rights only if you anticipate many incoming offers for this proposal and won't have time to manage them.</p>
      </div>
      <div class="stageSectionContent">
        <pform-input
          class="wizardFormInput"
          label="Keep Admin Rights With All Incoming Offers">
          <ptoggle value.bind="wizardState.registrationData.keepAdminRights"></ptoggle>
        </pform-input>
      </div>
    </div>

    <div class="stageSection" if.bind="isOpenProposalWizard">
      <div class="stageSectionSidebar">
        <h2 class="sidebarHeader heading heading3 title">Make Incoming Offers Private?</h2>
        <p class="sidebarText">Toggle this option on if you want the incoming proposals to be only visible to the Proposal Lead and the Deal Representatives.</p>
        <p class="sidebarText">You can always turn the deal to public during the negotiation phase to receive feedback from the community or after the deal is ratified. Once turned public, the conversations held in private will remain private.</p>
        <p class="sidebarText">A negotiated deal that has been turned public can be turned back into private, and vice versa.</p>
      </div>
      <div class="stageSectionContent">
        <pform-input
          class="wizardFormInput"
          label="Make Offers Private">
          <ptoggle value.bind="wizardState.registrationData.offersPrivate"></ptoggle>
        </pform-input>
      </div>
    </div>

    <div class="stageSection" if.bind="!isOpenProposalWizard">
      <div class="stageSectionSidebar">
        <h2 class="sidebarHeader heading heading3 title">Make this Deal Private?</h2>
        <p class="sidebarText">Toggle this option if you don't want the public to see what is being discussed by the DAOs. This will make all conversations of this Partnered Deal only visible by the Proposal Lead and the Deal Representatives from both DAOs.</p>
        <p class="sidebarText">You can always turn the deal public during negotiation phase to receive feedback from the community or after the deal is ratified. Once turned public, the conversations held in private will remain private.</p>
      </div>
      <div class="stageSectionContent">
        <pform-input
          class="wizardFormInput"
          label="Make Deal Private">
          <ptoggle
            disabled.bind="isMakeAnOfferWizardAndKeepsAdminRights"
            value.bind="wizardState.registrationData.isPrivate"></ptoggle>
        </pform-input>
      </div>
    </div>

  </stage-wrapper>
</template>
